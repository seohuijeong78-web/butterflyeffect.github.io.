<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Video Fit</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
    }

    #video-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      background: #000;
    }

    #bg-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
    }

    /* 왼쪽 하단 EXPLANATION */
    #text-left {
      position: fixed;
      bottom: 18px;
      left: 25px;
      color: white;
      font-size: 19.5px;
      font-family: "Trajan Pro", serif;
      letter-spacing: 3px;
      cursor: pointer;
      pointer-events: auto;
      z-index: 10;
    }

    /* 오른쪽 하단 CLICK ANYWHERE */
    #text-right {
      position: fixed;
      bottom: 18px;
      right: 25px;
      color: white;
      font-size: 19.5px;
      font-family: "Trajan Pro", serif;
      letter-spacing: 3px;
      pointer-events: none;
      text-align: right;
      z-index: 10;
    }

    /* SVG 이미지 */
    #explanation-svg {
      position: fixed;
      bottom: -5px;
      left: 15px;
      width: 650px;
      height: auto;
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
      z-index: 6;
    }

    /* 스크롤바 UI */
    #scrollbar-ui {
      position: fixed;
      top: 75%;
      right: 920px;
      transform: translateY(-50%);
      display: none;
      width: 5px;
      height: 150px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 3px;
      z-index: 10;
    }

    #scrollbar-thumb {
      width: 100%;
      height: 50%;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 3px;
      cursor: pointer;
      position: absolute;
      top: 0;
      transition: top 0.2s ease;
    }
  </style>
</head>

<body>

  <div id="video-wrapper">
    <video id="bg-video" autoplay muted loop playsinline preload="auto">
      <source src="https://raw.githubusercontent.com/seohuijeong78-web/video-host/main/%EC%BB%B4%ED%8F%AC%EC%A7%80%EC%85%98%201_1.mp4" type="video/mp4">
    </video>
  </div>

  <!-- 왼쪽 하단 -->
  <div id="text-left">EXPLANATION</div>

  <!-- SVG 이미지 -->
  <img id="explanation-svg" src="https://res.cloudinary.com/dshryrukz/image/upload/v1764689521/p_b_vvpcim.svg" alt="Explanation">

  <!-- 스크롤바 UI -->
  <div id="scrollbar-ui">
    <div id="scrollbar-thumb"></div>
  </div>

  <!-- 오른쪽 하단 -->
  <div id="text-right">CLICK ANYWHERE</div>

  <script>
    const v = document.getElementById("bg-video");
    v.playbackRate = 0.75;

    const textLeft = document.getElementById("text-left");
    const explanationSvg = document.getElementById("explanation-svg");
    const scrollbarUI = document.getElementById("scrollbar-ui");
    const scrollbarThumb = document.getElementById("scrollbar-thumb");

    // SVG 경로
    const SVG1 = "https://res.cloudinary.com/dshryrukz/image/upload/v1764689521/p_b_vvpcim.svg";
    const SVG2 = "https://res.cloudinary.com/dshryrukz/image/upload/v1764692051/p_b_2_wzcb6j.svg";

    let currentSVG = 1;
    let isHovering = false;

    // 아무 곳이나 클릭하면 다음 페이지로 이동
    document.body.addEventListener("click", () => {
      window.location.href = "choice1.html";
    });

    // EXPLANATION에 마우스 올리면 SVG와 스크롤바 표시
    textLeft.addEventListener("mouseenter", () => {
      isHovering = true;
      currentSVG = 1;
      explanationSvg.src = SVG1;
      explanationSvg.style.opacity = "1";
      scrollbarUI.style.display = "block";
      updateScrollbarPosition();
    });

    // EXPLANATION에서 마우스 벗어나면 숨김
    textLeft.addEventListener("mouseleave", () => {
      isHovering = false;
      explanationSvg.style.opacity = "0";
      scrollbarUI.style.display = "none";
    });

    // 스크롤로 SVG 변경
    window.addEventListener("wheel", (e) => {
      if (!isHovering) return;

      if (e.deltaY > 0) {
        // 아래로 스크롤 - SVG2 표시
        currentSVG = 2;
        explanationSvg.src = SVG2;
      } else if (e.deltaY < 0) {
        // 위로 스크롤 - SVG1 표시
        currentSVG = 1;
        explanationSvg.src = SVG1;
      }
      updateScrollbarPosition();
    });

    // 스크롤바 위치 업데이트
    function updateScrollbarPosition() {
      const maxTop = scrollbarUI.offsetHeight - scrollbarThumb.offsetHeight;
      const position = currentSVG === 1 ? 0 : maxTop;
      scrollbarThumb.style.top = position + "px";
    }

    // 스크롤바 드래그 기능
    let isDragging = false;
    let startY = 0;

    scrollbarThumb.addEventListener("mousedown", (e) => {
      isDragging = true;
      startY = e.clientY - scrollbarThumb.offsetTop;
      e.preventDefault();
    });

    document.addEventListener("mousemove", (e) => {
      if (!isDragging || !isHovering) return;

      const scrollbarRect = scrollbarUI.getBoundingClientRect();
      const maxTop = scrollbarUI.offsetHeight - scrollbarThumb.offsetHeight;
      let newTop = e.clientY - scrollbarRect.top - startY;

      // 범위 제한
      newTop = Math.max(0, Math.min(newTop, maxTop));
      scrollbarThumb.style.top = newTop + "px";

      // SVG 변경 (중간 지점 기준)
      const midPoint = maxTop / 2;
      if (newTop < midPoint && currentSVG !== 1) {
        currentSVG = 1;
        explanationSvg.src = SVG1;
      } else if (newTop >= midPoint && currentSVG !== 2) {
        currentSVG = 2;
        explanationSvg.src = SVG2;
      }
    });

    document.addEventListener("mouseup", () => {
      if (isDragging) {
        isDragging = false;
        updateScrollbarPosition(); // 정확한 위치로 스냅
      }
    });
  </script>

</body>
</html>
